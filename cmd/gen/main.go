package main

import (
	"os"

	"github.com/j7mbo/Injector/TypeRegistry"
)

func main() {
	gen := TypeRegistry.NewAutoRegistryGenerator(TypeRegistry.AutoGeneratedRegistryWriter{})

	/* First arg is always the filepath. */
	if len(os.Args) >= 2 && os.Args[1] == "reset" {
		gen.Reset()

		return
	}

	filesDir, err := os.Getwd()

	if err != nil {
		panic("Got an error when trying to read the current directory.. error: " + err.Error())
	}

	gen.Generate(filesDir, "vendor/")
}
